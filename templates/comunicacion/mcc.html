  {% extends 'base.html' %}
  {% load static %}
  {% block title %} Plataforma Intersectorial de Comunicaci&oacute;n OGCS {% endblock %}
  {% block content %}
  {% load render_table from django_tables2 %}
  
{% if mensaje %}
<h4><div class="alert alert-success"><a class="close" data-dismiss="alert">×</a><strong>Mensaje:</strong>
<p>{{ mensaje }}</p></div></h4>
{% endif %}

<div class="tab-content" id="contenido_izq">
<div id="nuevo" class="tab-pane fade in active" style="width:500px">
<form enctype="multipart/form-data" class="form-inline" id="frmcca" name="frmcca" method="post" action="{% if aporte %}{% url ogcs-mantenimiento-pgcs-aporte-add %}{% else %}{% url ogcs-mantenimiento-pgcs-add %}{% endif %}" ><!--data-toggle="modal"-->
<div id="frmprovincia" class="modal" style="position: relative; top: auto; left: auto; margin: 0 auto auto 20px; z-index: 1;width:720px;height:auto"><!--class="modal hide fade">-->
    <div class="modal-header">
      <h3>Nuevo MCC(Matriz de Campaña de Crisis)</h3>
      
    </div>
    <div class="modal-body" style="max-height:2000px;" >
      {% csrf_token %}
      <div class="row-fluid">
          <div class="alert alert-error" id="alert"><strong></strong><!--<a class="close" data-dismiss="alert">×</a>--></div>
          <label>Nombre de la campaña: </label> {{ form.nombremmc }}<br /><br />
          <label class="input-append date" style="display:inline" id="dp4" data-date-format="dd-mm-yyyy" >Fecha inicial: {{ form.fechaini }}<span class="add-on"><i class="icon-th"></i></span></label> 
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
          <label id="dp5" style="display:inline" class="input-append date" data-date-format="dd-mm-yyyy" >Fecha final:  {{ form.fechafin }}<span class="add-on"><i class="icon-th"></i></span></label><br /><br />
          
          <label>Tipo: {{ form.nummcctipo }}</label> 
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
          <label>Estado:  {{ form.nummccestado }}</label><br /><br />
          
           <label>Region: {{ form.region }}</label> 
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
          <label>Provincia:  {{ form.provincia }}</label><br /><br />
          <label>Lugar:  {{ form.lugar }}</label><br /><br />
          <label>Breve descripción y estado actual:<br />  {{ form.descripcionmcc }}</label><br /><br />

      </div>
      
     <!------------------------------------------------------------------------------------------------------------------>      
       <!------------------------------------------------------- actore  ---------------------------------------------->
             
            <div class="modal-header">
      		<h3>Actores involucrados y postura</h3>
      	</div>
    	<div class="row-fluid">
        	<div class="alert alert-error" id="alert1"><strong></strong><!--<a class="close" data-dismiss="alert">×</a>--></div>
    		  <label>Tipo: {{ form_actor.numtipovarios }}</label> <br /><br />
              <label>Actor: {{ form_actor.actor }}</label>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
          <label>Institucion:  {{ form_actor.institucion }}</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="btn-primary" name="agregar" value="Agregar" type="button" onclick="agregar_actor()">

    	</div>
      
        <br>
          	<fieldset>
          	{% render_table tabla1 %}    
          	</fieldset>
        
        
         <!------------------------------------------------------------------------------------------------------------------>      
       <!------------------------------------------------------- lideres  ---------------------------------------------->
             
            <div class="modal-header">
      		<h3>Lideres de opinión en medios y postura</h3>
      	</div>
    	<div class="row-fluid">
        	<div class="alert alert-error" id="alert2"><strong></strong><!--<a class="close" data-dismiss="alert">×</a>--></div>
    		 <label>Tipo: {{ form_lider.numtipovarios }}</label> <br /><br />
              <label>Lider: {{ form_lider.lider }}</label>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
          <label>Institucion:  {{ form_lider.institucion }}</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <input class="btn-primary" name="agregar" value="Agregar" type="button" onclick="agregar_lider()">
    	</div>
      
        <br>
          	<fieldset>
          	{% render_table tabla2 %}    
          	</fieldset>
        
        <!------------------------------------------------------------------------------------------------------------------>      
       <!------------------------------------------------------- propuesta  ---------------------------------------------->
             
            <div class="modal-header">
      		<h3>Propuesta estratégica comunicacional</h3>
      	</div>
    	<div class="row-fluid"><br />
    		<label>{{ form.propuestamcc }}</label>
    	</div>
        
        <!------------------------------------------------------------------------------------------------------------------>      
       <!------------------------------------------------------- observacion  ---------------------------------------------->
             
            <div class="modal-header">
      		<h3>Observaciones OGCP</h3>
      	</div>
    	<div class="row-fluid">
        	<div class="alert alert-error" id="alert3"><strong></strong><!--<a class="close" data-dismiss="alert">×</a>--></div>
    		{{ form_observacion }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="btn-primary" name="agregar" value="Agregar" type="button" onclick="agregar_observacion_mcc()" />
    	</div>
      
        <br>
          	<fieldset>
          	{% render_table tabla3 %}    
          	</fieldset>
        
            
            
        
        </div>
    
    <div class="modal-footer">
     <input class="btn-primary" name="grabar" value="Guardar" type="submit">
     <input class="btn" name="grabar" value="Cerrar" type="button" onclick="cerrarformulario('contenido');">
    </div>
</div>
</form>
</div></div>
  {% endblock %}
  {% block scriptjs %}  

<script>


$('#dp4').datepicker().on('changeDate', function(ev){
					var fechaini = $("#id_fechaini").val().split('-');
					var fechafin = $("#id_fechafin").val().split('-');
					 var stDate = new Date(fechaini[2],fechaini[1],fechaini[0]);
            		 var endDate = new Date(fechafin[2],fechafin[1],fechafin[0]);
					 
					if($('#id_fechafin').val()!=""){
						if (stDate.valueOf() > endDate.valueOf()){
							$('#alert').show().find('strong').text('La fecha inicial no puede ser mayor que la fecha final.');
							$('#id_fechaini').val($('#id_fechafin').val())
						} else {
							$('#alert').hide();
						}
					}$('#dp4').datepicker('hide')
				});

$('#dp5').datepicker().on('changeDate', function(ev){
					var fechaini = $("#id_fechaini").val().split('-');
					var fechafin = $("#id_fechafin").val().split('-');
					 var stDate = new Date(fechaini[2],fechaini[1],fechaini[0]);
            		 var endDate = new Date(fechafin[2],fechafin[1],fechafin[0]);
					
					if($('#id_fechaini').val()!=""){
						if (stDate.valueOf() > endDate.valueOf()){
							$('#alert').show().find('strong').text('La fecha final no puede ser menor que la fecha inicial.');
							$('#id_fechafin').val($('#id_fechaini').val())
						} else {
							$('#alert').hide();
						}
					}$('#dp5').datepicker('hide');
				});


$('#dp6').datepicker().on('changeDate', function(ev){
					var fechaini = $("#id_fechaini_acc").val().split('-');
					var fechafin = $("#id_fechafin_acc").val().split('-');
					 var stDate = new Date(fechaini[2],fechaini[1],fechaini[0]);
            		 var endDate = new Date(fechafin[2],fechafin[1],fechafin[0]);
					 
					if($('#id_fechafin_acc').val()!=""){
						if (stDate.valueOf() > endDate.valueOf()){
							$('#alert').show().find('strong').text('La fecha inicial no puede ser mayor que la fecha final.');
							$('#id_fechaini_acc').val($('#id_fechafin_acc').val())
						} else {
							$('#alert').hide();
						}
					}$('#dp6').datepicker('hide')
				});

$('#dp1').datepicker().on('changeDate', function(ev){
					var fechaini = $("#id_fechaini_acc").val().split('-');
					var fechafin = $("#id_fechafin_acc").val().split('-');
					 var stDate = new Date(fechaini[2],fechaini[1],fechaini[0]);
            		 var endDate = new Date(fechafin[2],fechafin[1],fechafin[0]);
					
					if($('#id_fechaini_acc').val()!=""){
						if (stDate.valueOf() > endDate.valueOf()){
							$('#alert').show().find('strong').text('La fecha final no puede ser menor que la fecha inicial.');
							$('#id_fechafin_acc').val($('#id_fechaini_acc').val())
						} else {
							$('#alert').hide();
						}
					}$('#dp5').datepicker('hide');
				});
				
</script>

  {% endblock %}
